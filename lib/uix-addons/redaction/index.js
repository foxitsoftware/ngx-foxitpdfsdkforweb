!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],t):"object"==typeof exports?exports.RedactionAddon=t(require("UIExtension")):e.RedactionAddon=t(e.UIExtension)}(self,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={redactAnnotApplyed:"apply-redaction",redactAnnotAllApplyed:"apply-all-redaction",annotationAdd:"annotation-add",annotationRemoved:"annotation-removed",addRedactionArea:"add-redaction-area"}},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.cursorStyle="fv__cursor-highlight",r}return r(t,e),t.getStateName=function(){return"create-redaction-text-state"},t.prototype.addAnnot=function(e,t){return e.markRedactAnnot(t)},t}(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)).TextMarkupStateHandler);t.default=o},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=n(14)},function(e,t){e.exports=null},function(e,t,n){n(4);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<dropdown @tooltip tooltip-title="redaction:tooltips.redaction" icon-class="fv__icon-toolbar-redaction" popup-class="fv__ui-redaction-redaction-list" class="fv__ui-redaction-dropdown" text="redaction:buttons.title">\n    <dropdown-button class="fv__ui-redaction-item" name="create-text-redaction" @controller="redaction:RedactionTextController" icon-class="fv__icon-toolbar-text-redaction">\n        redaction:buttons.redact_text\n    </dropdown-button>\n    <dropdown-button class="fv__ui-redaction-item" name="create-area-redaction" @controller="redaction:RedactionController" icon-class="fv__icon-toolbar-area-redaction">\n        redaction:buttons.redact_area\n    </dropdown-button>\n    <dropdown-button class="fv__ui-redaction-item" name="create-page-redaction" @controller="redaction:RedactionPageController" icon-class="fv__icon-toolbar-page-redaction">\n        redaction:buttons.redact_page\n    </dropdown-button>\n</dropdown>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));!function(e){e&&e.__esModule}(n(1));function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var a=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return o(t,e),t.prototype.handle=function(){this.getComponentByName("sidebar").expand(),this.getComponentByName("sidebar-search").active(),this.getComponentByName("fv-search-sidebar-panel").activeRedactionMode()},t}(r.Controller);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=a(n(1));a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var c=r.PDFViewCtrl.Events,u=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return i(t,e),t.prototype.handle=function(){var e=this;if(!this.component.disabled){var t=this.getPDFUI();t.localizer.translate("redaction:dialog.apply_alert").then(function(n){window.confirm(n)&&t.getPDFViewer().then(function(t){t.getCurrentPDFDoc().applyRedaction().then(function(n){!1!==n&&(n.forEach(function(e){var n=e.pageIndex,r=e.removedAnnots,o=t.getPDFDocRender().pagesRender.pageRenders[n];if(o.annotsRender)for(var a=o.annotsRender.annots,i=a.length-1;i>=0;i--){var c=a[i];-1!==r.indexOf(c.id)&&(c.info.isDeleted=!0,a.splice(i,1))}}),t.getPDFDocRender().pagesRender.setRenderFlags(10),t.getPDFDocRender().pagesRender.renderVisiblePages(),t.eventEmitter.emit(o.default.redactAnnotApplyed,e))})})})}},t.prototype.mounted=function(){var e=this,t=this.getPDFUI();t.addViewerEventListener(o.default.redactAnnotAllApplyed,function(t,n){e.component.disable()}),t.addViewerEventListener(o.default.redactAnnotApplyed,function(t,n){e.isRedactExist()}),t.addViewerEventListener(c.openFileSuccess,function(t){e.component.disable()}),t.addViewerEventListener(c.redactAnnotRendered,function(t){e.component.enable()}),t.addViewerEventListener(o.default.annotationRemoved,function(t){for(var n=0;n<t.length;n++){if("redact"==t[n].info.type){e.isRedactExist();break}}})},t.prototype.isRedactExist=function(){var e=this;this.getPDFUI().getPDFViewer().then(function(e){return e.currentPDFDoc.getAnnots()}).then(function(t){for(var n=!1,r=0;r<t.length;r++){for(var o=t[r],a=0;a<o.length;a++){var i=o[a];if("redact"==i.info.type&&!1===i.info.isDeleted){n=!0;break}}if(n)break}n?e.component.enable():e.component.disable()})},t}(r.Controller);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));!function(e){e&&e.__esModule}(n(1));function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var a=r.PDFViewCtrl.Events,i=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return o(t,e),t.getName=function(){return"RedactionPageController"},t.prototype.handle=function(){this.popop.show(),this.popop.reset()},t.prototype.mounted=function(){var e=this;this.popop=this.getComponentByName("redaction-page-popup");var t=this.getPDFUI();t.addViewerEventListener(a.openFileSuccess,function(n){var r=n.getPageCount();e.popop.setSubmitCallback(function(r){0==r.length?t.getPDFViewer().then(function(t){r=[t.getPDFDocRender().currentPageIndex],n.makeRedactByPages(r).then(function(t){e.popop.hide()})}):n.makeRedactByPages(r).then(function(t){e.popop.hide()})},r);var o="Max: "+r;e.popop.rendered(o)})},t}(r.Controller);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=(a(n(1)),a(n(2)));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var c=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,o.default))}return i(t,e),t.getName=function(){return"RedactionTextController"},t}(r.StatefulController);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var c=o.PDFViewCtrl,u=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,"square"));return r.pdfViewer=n,r.cursorStyle="fv__cursor-cross",r.destroyHooks=[],r}return i(t,e),t.getStateName=function(){return"create-redaction-state"},t.prototype.getDevicePagePoint=function(e,t){var n=e.getBoundingClientRect(),r=t.srcEvent;return{x:r.clientX-n.left-t.deltaX,y:r.clientY-n.top-t.deltaY}},t.prototype.correctPosition=function(e){var t=this;return this.pageRender.getPDFPage().then(function(n){var r=t.pageRender.getScale(),o=n.getPxWidth()*r,a=n.getPxHeight()*r;return{x:Math.max(0,Math.min(o,e.x)),y:Math.max(0,Math.min(a,e.y))}})},t.prototype.start=function(e,t){var n=t.left,r=t.top;this.shapeControl||(this.shapeControl=new c.ShapeControl({resizable:!1,enableDiagonally:!0}),this.shapeControl.active(e.$handler,e.$handler,{left:n,top:r,width:0,height:0}))},t.prototype.adjust=function(e,t,n){var r,o,a=t.x,i=t.y,c=n.x,u=n.y,l=Math.abs(a-c),s=Math.abs(i-u),f={left:r=Math.min(a,c),top:o=Math.min(i,u),width:l=Math.max(l,1),height:s=Math.max(s,1)},p={left:r,top:o,right:r+l,bottom:o+s};e._applyAnnotBoundary(f),e.shape.boundary=p,e.shape.shape=f,e._updatePreviewer()},t.prototype.pageHandler=function(e){var t=this;this.pageRender=e;var n=e.$handler.get(0);e.$handler.addClass(this.cursorStyle);var o=this.hammer=new c.Deps.Hammer.Manager(n);e.$handler;o.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL})),o.on("panstart",function(o){t.startPoint=t.getDevicePagePoint(n,o),e.getPDFPage().then(function(n){var o=n.reverseDevicePoint([t.startPoint.x,t.startPoint.y],t.pageRender.scale),a=r(o,2),i=a[0],c=a[1];t.start(e,{left:i,top:c})})}),o.on("panmove",function(e){return t.correctPosition({x:t.startPoint.x+e.deltaX,y:t.startPoint.y+e.deltaY}).then(function(e){return t.currentPoint=e,t.adjust(t.shapeControl,t.startPoint,t.currentPoint)})}),o.on("panend",function(n){t.correctPosition({x:t.startPoint.x+n.deltaX,y:t.startPoint.y+n.deltaY}).then(function(n){t.currentPoint=n,t.adjust(t.shapeControl,t.startPoint,t.currentPoint),t.pdfViewer.eventEmitter.emit(a.default.addRedactionArea,e,t.shapeControl.shape.boundary),t.shapeControl.destroy(),t.shapeControl=null})}),o.on("pancancel",function(e){t.shapeControl.destroy(),t.shapeControl=null})},t.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.destroyHooks.forEach(function(e){return e()})},t}(c.IStateHandler);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=c(n(1)),i=c(n(11));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var l=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i.default))}return u(t,e),t.getName=function(){return"RedactionController"},t.prototype.mounted=function(){this.getPDFUI().addViewerEventListener(a.default.addRedactionArea,function(e,t){e.getPDFPage().then(function(n){var o=n.reverseDevicePoint([t.left,t.top],e.scale),a=r(o,2),i=a[0],c=a[1],u=n.reverseDevicePoint([t.right,t.bottom],e.scale),l=r(u,2),s={left:i,top:c,right:l[0],bottom:l[1]};return n.markRedactAnnot([s])}).then(function(t){var n=t[0];e.annotsRender.getAnnotRender(n.getId()).component.active()})})},t}(o.StatefulController);t.default=l},function(e,t,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(e){}}).call(this,n(3))},function(e,t,n){"use strict";(function(t){
/*! art-template@runtime | https://github.com/aui/art-template */
var r=n(13),o=Object.create(r?t:window),a=/["&'<>]/;o.$escape=function(e){return function(e){var t=""+e,n=a.exec(t);if(!n)return e;var r="",o=void 0,i=void 0,c=void 0;for(o=n.index,i=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}i!==o&&(r+=t.substring(i,o)),i=o+1,r+=c}return i!==o?r+t.substring(i,o):r}(function e(t){"string"!=typeof t&&(t=void 0===t||null===t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},o.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var o in e)t(e[o],o)},e.exports=o}).call(this,n(3))},function(e,t,n){var r=n(4);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div class="fv__redaction-container">\n    <label>\n        <input name="redaction-page-type" class="redaction-page-radio" type="radio" checked value="1" /><span>Mark current page for redaction</span>\n    </label>\n</div>\n<div class="fv__redaction-container">\n    <label>\n        <input name="redaction-page-type" class="redaction-page-radio" type="radio" value="2" /><span>Mark specific page range for redaction</span>\n        <div class="fv__redaction-range">Page range: <input type="text" class="fv__redaction-page-range" disabled placeholder="',t+=(0,r.$escape)(e),t+='"/></div>\n    </label>\n</div> \n<div class="fv__redaction-container" style="text-align:right">\n    <button type="button" class="fv__redaction-btn">OK</button>\n    <button type="button" class="fv__redaction-cancel">Cancel</button>\n</div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));n(31);var o=function(e){return e&&e.__esModule?e:{default:e}}(n(15));function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return a(t,e),t.getName=function(){return"redaction-page-popup"},t.prototype.bindEvent=function(e,t,n){var r=this,o=this.element.querySelectorAll(e);0!=o.length&&o.forEach(function(e){e.addEventListener(t,n),r.destroyHooks.push(function(){e.removeEventListener(t,n)})})},t.prototype.render=function(){e.prototype.render.call(this),this.destroyHooks=[],this.element.classList.add("fv__redaction-page-popup")},t.prototype.rendered=function(e){this.element.querySelector(".fv__ui-layer-panel").innerHTML=(0,o.default)(e),this.localize(),this.mountEvent()},t.prototype.mountEvent=function(){var e=this;this.bindEvent(".redaction-page-radio","change",function(t){t.target.checked&&(e.hideError(),"1"==t.target.value?e.element.querySelector(".fv__redaction-page-range").setAttribute("disabled",""):e.element.querySelector(".fv__redaction-page-range").removeAttribute("disabled"))}),this.bindEvent(".fv__redaction-cancel","click",function(t){e.hide()}),this.bindEvent(".fv__redaction-btn","click",function(t){e.submit()}),this.bindEvent(".fv__redaction-page-range","keydown",function(t){e.hideError()})},t.prototype.setSubmitCallback=function(e,t){this.submitCallback=e,this.docPageCount=t},t.prototype.submit=function(){var e=this.docPageCount,t=!1;this.element.querySelectorAll(".redaction-page-radio").forEach(function(e){e.checked&&"1"==e.value&&(t=!0)});var n=[];if(t)return this.submitCallback(n);var r=this.element.querySelector(".fv__redaction-page-range").value;if(new RegExp(/[^\d\-,]/).test(r))this.showError();else{for(var o=r.split(","),a=0;a<o.length;a++){var i=o[a];if(i.indexOf("-")>-1){var c=i.split("-");if(c.length>2)return void this.showError();if(c[0]<1||c[0]>e||c[1]<1||c[1]>e)return void this.showError();for(var u=Math.min(c[0],c[1]),l=Math.max(c[0],c[1]),s=u;s<=l;s++)-1===n.indexOf(s)&&n.push(s-1)}else{if(i<1||i>e)return void this.showError();-1===n.indexOf(n)&&n.push(i-1)}}this.submitCallback(n)}},t.prototype.reset=function(){this.hideError(),this.element.querySelector(".redaction-page-radio").checked=!0,this.element.querySelector(".fv__redaction-page-range").value=""},t.prototype.showError=function(e){this.element.querySelector(".fv__redaction-page-range").classList.add("fv__redaction-error")},t.prototype.hideError=function(){this.element.querySelector(".fv__redaction-page-range").classList.remove("fv__redaction-error")},t.prototype.destroy=function(){this.destroyHooks.forEach(function(e){return e()})},t}(r.widgets.LayerComponent);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=p(n(16)),a=p(n(12)),i=p(n(10)),c=p(n(9)),u=p(n(8)),l=p(n(7));n(26);var s=p(n(6)),f=p(n(5));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var h=(0,s.default)(),y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return d(t,e),t.getName=function(){return"redaction"},t.getLoader=function(){return f.default},t.prototype.init=function(){var e=r.modular.module("redaction",[]),t=e.getRegistry();this.module=e,t.registerController(a.default),t.registerController(i.default),t.registerController(c.default),t.registerComponent(o.default)},t.prototype.fragments=function(){return[{target:"template-container",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:'\n            <redaction:redaction-page-popup name="redaction-page-popup" append-to="body" class="center" modal backdrop>\n                <layer-header title="redaction:buttons.redact_page" @draggable="{type:\'parent\'}"></layer-header>\n                <layer-view>\n                </layer-view>\n            </redaction:redaction-page-popup>\n            '},{target:"protect-toolbar-group-list",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:'<redaction:group name="redaction"></redaction:group>',config:[{target:"redaction"}]},{target:"redaction",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:h},{target:"redaction",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:'<xbutton name="redaction-apply" class="fv__ui-toolbar-show-text-button"  icon-class="fv__icon-toolbar-apply-redaction"  @tooltip>redaction:buttons.apply</xbutton>',config:[{target:"redaction-apply",tooltip:{title:"redaction:tooltips.apply"},callback:u.default}]},{target:"redaction",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:'<xbutton name="redaction-search" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-toolbar-search-redaction" @tooltip>redaction:buttons.redact_search</xbutton>',config:[{target:"redaction-search",tooltip:{title:"redaction:buttons.redact_search"},callback:l.default}]}]},t}(r.UIXAddon);t.default=y},,,,,,,,,function(e,t){},,,,,function(e,t){}]).default});