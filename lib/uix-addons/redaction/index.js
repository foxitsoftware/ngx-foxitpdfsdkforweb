!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],t):"object"==typeof exports?exports.RedactionAddon=t(require("UIExtension")):e.RedactionAddon=t(e.UIExtension)}(self,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={redactAnnotApplyed:"apply-redaction",redactAnnotAllApplyed:"apply-all-redaction",annotationAdd:"annotation-add",annotationRemoved:"annotation-removed",addRedactionArea:"add-redaction-area"}},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.cursorStyle="fv__cursor-highlight",r}return r(t,e),t.getStateName=function(){return"create-redaction-text-state"},t.prototype.addAnnot=function(e,t){return e.markRedactAnnot(t)},t.prototype.afterAddAnnot=function(e){this.pdfViewer.getMementoManager().before({host:e,method:"markRedactAnnot"}),this.pdfViewer.getMementoManager().after({host:e,method:"markRedactAnnot"})},t}(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)).TextMarkupStateHandler);t.default=o},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";e.exports=n(14)},function(e,t){e.exports=null},function(e,t,n){n(4);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<dropdown @tooltip name="create-redaction-controllers" tooltip-title="redaction:tooltips.redaction" icon-class="fv__icon-toolbar-redaction" popup-class="fv__ui-redaction-redaction-list" class="fv__ui-redaction-dropdown" text="redaction:buttons.title">\n    <dropdown-button class="fv__ui-redaction-item" name="create-text-redaction" @controller="redaction:RedactionTextController" icon-class="fv__icon-toolbar-text-redaction">\n        redaction:buttons.redact_text\n    </dropdown-button>\n    <dropdown-button class="fv__ui-redaction-item" name="create-area-redaction" @controller="redaction:RedactionController" icon-class="fv__icon-toolbar-area-redaction">\n        redaction:buttons.redact_area\n    </dropdown-button>\n    <dropdown-button class="fv__ui-redaction-item" name="create-page-redaction" @controller="redaction:RedactionPageController" icon-class="fv__icon-toolbar-page-redaction">\n        redaction:buttons.redact_page\n    </dropdown-button>\n</dropdown>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));!function(e){e&&e.__esModule}(n(1));function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var i=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return a(t,e),t.prototype.handle=function(){this.getComponentByName("sidebar").expand(),this.getComponentByName("sidebar-search").active(),this.getComponentByName("fv-search-sidebar-panel").activeRedactionMode()},r(t,null,[{key:"permission",get:function(){return o.PDFViewCtrl.Consts.PDFDocPermission.AnnotForm}}]),t}(o.Controller);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=i(n(1));i(n(2));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var u=o.PDFViewCtrl.Events,l=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return c(t,e),t.prototype.handle=function(){var e=this;if(!this.component.disabled){var t=this.getPDFUI();t.localizer.translate("redaction:dialog.apply_alert").then(function(n){window.confirm(n)&&t.getPDFViewer().then(function(t){t.getCurrentPDFDoc().applyRedaction().then(function(n){!1!==n&&(n.forEach(function(e){var n=e.pageIndex,r=e.removedAnnots,o=t.getPDFDocRender().pagesRender.pageRenders[n];if(o.annotsRender)for(var a=o.annotsRender.annots,i=a.length-1;i>=0;i--){var c=a[i];-1!==r.indexOf(c.id)&&(t.getMementoManager().clear(),c.info.isDeleted=!0,a.splice(i,1))}}),t.getPDFDocRender().pagesRender.setRenderFlags(10),t.getPDFDocRender().pagesRender.renderVisiblePages(),t.eventEmitter.emit(a.default.redactAnnotApplyed,e))})})})}},t.prototype.mounted=function(){var e=this,t=this.getPDFUI();t.addViewerEventListener(a.default.redactAnnotAllApplyed,function(t,n){e.component.disable()}),t.addViewerEventListener(a.default.redactAnnotApplyed,function(t,n){e.isRedactExist()}),t.addViewerEventListener(u.openFileSuccess,function(t){e.component.disable()}),t.addViewerEventListener(u.redactAnnotRendered,function(n){t.getPDFDocRender().then(function(t){8&t.getUserPermission().getValue()&&e.component.enable()})}),t.addViewerEventListener(a.default.annotationRemoved,function(t){for(var n=0;n<t.length;n++){if("redact"==t[n].info.type){e.isRedactExist();break}}})},t.prototype.isRedactExist=function(){var e=this;this.getPDFUI().getPDFViewer().then(function(e){return e.currentPDFDoc.getAnnots()}).then(function(t){for(var n=!1,r=0;r<t.length;r++){for(var o=t[r],a=0;a<o.length;a++){var i=o[a];if("redact"==i.info.type&&!1===i.info.isDeleted){n=!0;break}}if(n)break}n?e.component.enable():e.component.disable()})},r(t,null,[{key:"permission",get:function(){return o.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),t}(o.Controller);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));!function(e){e&&e.__esModule}(n(1));function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var a=r.PDFViewCtrl.Events,i=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return o(t,e),t.getName=function(){return"RedactionPageController"},t.prototype.handle=function(){this.popop.show(),this.popop.reset()},t.prototype.mounted=function(){var e=this;this.popop=this.getComponentByName("redaction-page-popup");var t=this.getPDFUI();t.addViewerEventListener(a.openFileSuccess,function(n){var r=n.getPageCount();function o(e){t.getPDFViewer().then(function(t){var n=[];e.map(function(e){var t=e[0];n.push(t)}),t.getMementoManager().before({host:n,method:"makeRedactByPages"}),t.getMementoManager().after({host:n,method:"makeRedactByPages"})})}e.popop.setSubmitCallback(function(r){0==r.length?t.getPDFViewer().then(function(t){r=[t.getPDFDocRender().currentPageIndex],n.makeRedactByPages(r).then(function(t){o(t),e.popop.hide()})}):n.makeRedactByPages(r).then(function(t){o(t),e.popop.hide()})},r);var a="Max: "+r;e.popop.rendered(a)})},t}(r.Controller);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=(i(n(1)),i(n(2)));function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var u=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,a.default))}return c(t,e),t.getName=function(){return"RedactionTextController"},t.prototype.stateOut=function(){e.prototype.stateOut.call(this),this.component.parent.element.classList.remove("selected")},t.prototype.handle=function(){e.prototype.handle.call(this),this.component.parent.element.classList.add("selected"),this.getPDFUI().getStateHandlerManager().then(function(e){e.switchTo("create-redaction-text-state")})},r(t,null,[{key:"permission",get:function(){return o.PDFViewCtrl.Consts.PDFDocPermission.AnnotForm}}]),t}(o.StatefulController);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(1));function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var c=o.PDFViewCtrl,u=o.getDevicePagePoint,l=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,"square"));return r.pdfViewer=n,r.cursorStyle="fv__cursor-cross",r.destroyHooks=[],r}return i(t,e),t.getStateName=function(){return"create-redaction-state"},t.prototype.correctPosition=function(e){var t=this;return this.pageRender.getPDFPage().then(function(n){var r=t.pageRender.getScale(),o=n.getPxWidth()*r,a=n.getPxHeight()*r;return{x:Math.max(0,Math.min(o,e.x)),y:Math.max(0,Math.min(a,e.y))}})},t.prototype.start=function(e,t){var n=t.left,r=t.top;this.shapeControl||(this.shapeControl=new c.ShapeControl({resizable:!1,enableDiagonally:!0}),this.shapeControl.active(e.$handler,e.$handler,{left:n,top:r,width:0,height:0}))},t.prototype.adjust=function(e,t,n){var r,o,a=t.x,i=t.y,c=n.x,u=n.y,l=Math.abs(a-c),s=Math.abs(i-u),f={left:r=Math.min(a,c),top:o=Math.min(i,u),width:l=Math.max(l,1),height:s=Math.max(s,1)},p={left:r,top:o,right:r+l,bottom:o+s};e._applyAnnotBoundary(f),e.shape.boundary=p,e.shape.shape=f,e._updatePreviewer()},t.prototype.pageHandler=function(e){var t=this;this.pageRender=e;var n=e.$handler.get(0);e.$handler.addClass(this.cursorStyle);var o=this.hammer=new c.Deps.Hammer.Manager(n);e.$handler;o.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL})),o.on("panstart",function(o){t.startPoint=u(n,o),e.getPDFPage().then(function(n){var o=n.reverseDevicePoint([t.startPoint.x,t.startPoint.y],t.pageRender.scale),a=r(o,2),i=a[0],c=a[1];t.start(e,{left:i,top:c})})}),o.on("panmove",function(e){return t.correctPosition({x:t.startPoint.x+e.deltaX,y:t.startPoint.y+e.deltaY}).then(function(e){return t.currentPoint=e,t.adjust(t.shapeControl,t.startPoint,t.currentPoint)})}),o.on("panend",function(n){t.correctPosition({x:t.startPoint.x+n.deltaX,y:t.startPoint.y+n.deltaY}).then(function(n){t.currentPoint=n,t.adjust(t.shapeControl,t.startPoint,t.currentPoint),t.pdfViewer.eventEmitter.emit(a.default.addRedactionArea,e,t.shapeControl.shape.boundary),t.shapeControl.destroy(),t.shapeControl=null})}),o.on("pancancel",function(e){t.shapeControl.destroy(),t.shapeControl=null})},t.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.destroyHooks.forEach(function(e){return e()})},t}(c.IStateHandler);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=c(n(1)),i=c(n(11));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var l=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i.default))}return u(t,e),t.getName=function(){return"RedactionController"},t.prototype.mounted=function(){var e=this.getPDFUI();e.addViewerEventListener(a.default.addRedactionArea,function(t,n){t.getPDFPage().then(function(e){var o=e.reverseDevicePoint([n.left,n.top],t.scale),a=r(o,2),i=a[0],c=a[1],u=e.reverseDevicePoint([n.right,n.bottom],t.scale),l=r(u,2),s={left:i,top:c,right:l[0],bottom:l[1]};return e.markRedactAnnot([s])}).then(function(n){var r=n[0],o=t.annotsRender.getAnnotRender(r.getId()).component;e.getMementoManager().then(function(e){e.before({host:o,method:"markRedactAnnot"}),e.after({host:o,method:"markRedactAnnot"})}),t.annotsRender.activeAnnot(r.getId())})})},t.prototype.stateOut=function(){e.prototype.stateOut.call(this),this.component.parent.element.classList.remove("selected")},t.prototype.handle=function(){e.prototype.handle.call(this),this.component.parent.element.classList.add("selected"),this.getPDFUI().getStateHandlerManager().then(function(e){e.switchTo("create-redaction-state")})},t}(o.StatefulController);t.default=l},function(e,t,n){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(e){}}).call(this,n(3))},function(e,t,n){"use strict";(function(t){
/*! art-template@runtime | https://github.com/aui/art-template */
var r=n(13),o=Object.create(r?t:window),a=/["&'<>]/;o.$escape=function(e){return function(e){var t=""+e,n=a.exec(t);if(!n)return e;var r="",o=void 0,i=void 0,c=void 0;for(o=n.index,i=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}i!==o&&(r+=t.substring(i,o)),i=o+1,r+=c}return i!==o?r+t.substring(i,o):r}(function e(t){"string"!=typeof t&&(t=void 0===t||null===t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},o.$each=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t(e[n],n);else for(var o in e)t(e[o],o)},e.exports=o}).call(this,n(3))},function(e,t,n){var r=n(4);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div class="fv__redaction-container">\n    <label>\n        <input name="redaction-page-type" class="redaction-page-radio" type="radio" checked value="1" /><span>Mark current page for redaction</span>\n    </label>\n</div>\n<div class="fv__redaction-container">\n    <label>\n        <input name="redaction-page-type" class="redaction-page-radio" type="radio" value="2" /><span>Mark specific page range for redaction</span>\n        <div class="fv__redaction-range">Page range: <input type="text" class="fv__redaction-page-range" disabled placeholder="',t+=(0,r.$escape)(e),t+='"/></div>\n    </label>\n</div> \n<div class="fv__redaction-container" style="text-align:right">\n    <button type="button" class="fv__redaction-btn">OK</button>\n    <button type="button" class="fv__redaction-cancel">Cancel</button>\n</div>'}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));n(37);var o=function(e){return e&&e.__esModule?e:{default:e}}(n(15));function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return a(t,e),t.getName=function(){return"redaction-page-popup"},t.prototype.bindEvent=function(e,t,n){var r=this,o=this.element.querySelectorAll(e);0!=o.length&&o.forEach(function(e){e.addEventListener(t,n),r.destroyHooks.push(function(){e.removeEventListener(t,n)})})},t.prototype.render=function(){e.prototype.render.call(this),this.destroyHooks=[],this.element.classList.add("fv__redaction-page-popup")},t.prototype.rendered=function(e){this.element.querySelector(".fv__ui-layer-panel").innerHTML=(0,o.default)(e),this.localize(),this.mountEvent()},t.prototype.mountEvent=function(){var e=this;this.bindEvent(".redaction-page-radio","change",function(t){t.target.checked&&(e.hideError(),"1"==t.target.value?e.element.querySelector(".fv__redaction-page-range").setAttribute("disabled",""):e.element.querySelector(".fv__redaction-page-range").removeAttribute("disabled"))}),this.bindEvent(".fv__redaction-cancel","click",function(t){e.hide()}),this.bindEvent(".fv__redaction-btn","click",function(t){e.submit()}),this.bindEvent(".fv__redaction-page-range","keydown",function(t){e.hideError()})},t.prototype.setSubmitCallback=function(e,t){this.submitCallback=e,this.docPageCount=t},t.prototype.submit=function(){var e=this.docPageCount,t=!1;this.element.querySelectorAll(".redaction-page-radio").forEach(function(e){e.checked&&"1"==e.value&&(t=!0)});var n=[];if(t)return this.submitCallback(n);var r=this.element.querySelector(".fv__redaction-page-range").value;if(new RegExp(/[^\d\-,]/).test(r))this.showError();else{for(var o=r.split(","),a=0;a<o.length;a++){var i=o[a];if(i.indexOf("-")>-1){var c=i.split("-");if(c.length>2)return void this.showError();if(c[0]<1||c[0]>e||c[1]<1||c[1]>e)return void this.showError();for(var u=Math.min(c[0],c[1]),l=Math.max(c[0],c[1]),s=u;s<=l;s++)-1===n.indexOf(s)&&n.push(s-1)}else{if(i<1||i>e)return void this.showError();-1===n.indexOf(n)&&n.push(i-1)}}this.submitCallback(n)}},t.prototype.reset=function(){this.hideError(),this.element.querySelector(".redaction-page-radio").checked=!0,this.element.querySelector(".fv__redaction-page-range").value=""},t.prototype.showError=function(e){this.element.querySelector(".fv__redaction-page-range").classList.add("fv__redaction-error")},t.prototype.hideError=function(){this.element.querySelector(".fv__redaction-page-range").classList.remove("fv__redaction-error")},t.prototype.destroy=function(){this.destroyHooks.forEach(function(e){return e()})},t}(r.widgets.LayerComponent);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=d(n(16)),i=d(n(12)),c=d(n(10)),u=d(n(9)),l=d(n(8)),s=d(n(7));n(32);var f=d(n(6)),p=d(n(5));function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],a=Object.getOwnPropertyDescriptor(t,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}}(e,t))}var v=(0,f.default)(),g=function(e){function t(){return h(this,t),y(this,e.apply(this,arguments))}return b(t,e),t.getName=function(){return"redaction"},t.getLoader=function(){return p.default},t.prototype.init=function(){var e=o.modular.module("redaction",[]),t=e.getRegistry();this.module=e,t.registerController(i.default),t.registerController(c.default),t.registerController(u.default),t.registerComponent(a.default),e.registerFragment("redaction-page-dialog",{template:'\n            <redaction:redaction-page-popup name="redaction-page-popup" append-to="body" class="center" modal backdrop>\n                <layer-header title="redaction:buttons.redact_page" @draggable="{type:\'parent\'}"></layer-header>\n                <layer-view>\n                </layer-view>\n            </redaction:redaction-page-popup>\n            '}),e.registerFragment("create-redactions-dropdown",{template:v,config:[{target:"create-redaction-controllers",callback:function(e){function t(){return h(this,t),y(this,e.apply(this,arguments))}return b(t,e),r(t,null,[{key:"permission",get:function(){return o.PDFViewCtrl.Consts.PDFDocPermission.AnnotForm}}]),t}(o.Controller)}]}),e.registerFragment("apply-redactions-button",{template:'<xbutton name="redaction-apply" class="fv__ui-toolbar-show-text-button"  icon-class="fv__icon-toolbar-apply-redaction"  @tooltip>redaction:buttons.apply</xbutton>',config:[{target:"redaction-apply",tooltip:{title:"redaction:tooltips.apply"},callback:l.default}]}),e.registerFragment("redaction-search-button",{template:'<xbutton name="redaction-search" class="fv__ui-toolbar-show-text-button" icon-class="fv__icon-toolbar-search-redaction" @tooltip>redaction:buttons.redact_search</xbutton>',config:[{target:"redaction-search",tooltip:{title:"redaction:buttons.redact_search"},callback:s.default}]})},t.prototype.fragments=function(){return[]},t}(o.UIXAddon);t.default=g},,,,,,,,,,,,,,,function(e,t){},,,,,function(e,t){}]).default});