!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],e):"object"==typeof exports?exports.EditGraphics=e(require("UIExtension")):t.EditGraphics=e(t.UIExtension)}(self,function(t){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=null},function(t,e,n){(function(e){t.exports=!1;try{t.exports="[object process]"===Object.prototype.toString.call(e.process)}catch(t){}}).call(this,n(0))},function(t,e,n){"use strict";(function(e){
/*! art-template@runtime | https://github.com/aui/art-template */
var o=n(2),r=Object.create(o?e:window),i=/["&'<>]/;r.$escape=function(t){return function(t){var e=""+t,n=i.exec(e);if(!n)return t;var o="",r=void 0,a=void 0,c=void 0;for(r=n.index,a=0;r<e.length;r++){switch(e.charCodeAt(r)){case 34:c="&#34;";break;case 38:c="&#38;";break;case 39:c="&#39;";break;case 60:c="&#60;";break;case 62:c="&#62;";break;default:continue}a!==r&&(o+=e.substring(a,r)),a=r+1,o+=c}return a!==r?o+e.substring(a,r):o}(function t(e){"string"!=typeof e&&(e=void 0===e||null===e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},r.$each=function(t,e){if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e(t[n],n);else for(var r in t)e(t[r],r)},t.exports=r}).call(this,n(0))},function(t,e,n){"use strict";t.exports=n(3)},function(t,e,n){n(4);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<dropdown @tooltip name="create-shapeObject-dropdown" class="fv__ui-dropdown-direction-row fv__ui-dropdown-hide-text">\n    <dropdown-button @tooltip name="add-pathObject-line" icon-class="fv__icon-toolbar-path-line">toolbar.buttons.line</dropdown-button>\n    <dropdown-button @tooltip name="add-pathObject-square" icon-class="fv__icon-toolbar-path-square">toolbar.buttons.square</dropdown-button>\n    <dropdown-button @tooltip name="add-pathObject-circle" icon-class="fv__icon-toolbar-path-circle">toolbar.buttons.circle</dropdown-button>\n    <dropdown-button @tooltip name="add-pathObject-roundRect" icon-class="fv__icon-toolbar-path-round-rectangle">toolbar.buttons.roundRect</dropdown-button>\n</dropdown>'}},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6)),i=c(n(5)),a=c(n(1));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var r=n[o],i=Object.getOwnPropertyDescriptor(e,r);i&&i.configurable&&void 0===t[r]&&Object.defineProperty(t,r,i)}}(t,e))}n(23);var d=function(t){function e(n){return u(this,e),l(this,t.call(this,n))}return s(e,t),e.prototype.switchStateHandler=function(t){this.getPDFUI().getStateHandlerManager().then(function(e){e.getCurrentStates().getStateName()===t?e.switchTo(e.get().getStateName()):e.switchTo(t)})},e.prototype.postlink=function(){var t=this;this.addDestroyHook(this.getPDFUI().addViewerEventListener("switch-state-handler",function(e,n){e.getStateName()===t.constructor.getName()?t.component.active():n.getStateName()===t.constructor.getName()&&t.component.deactive()}));var e=this.getPDFUI();e.getPDFViewer().then(function(n){t.addDestroyHook(n.getKeyboardEventBinder("create-annotation-keyboard-event-binder").on("cancel-creating-drawing-annot",function(n){if(t.component.isActive){var o=t.component.findClosestComponent(function(t){return"tab"===t.nodeName});o&&o.isActive&&e.getStateHandlerManager().then(function(t){var e=t.getCurrentStates();e.activedChildrenCount>0?e.activedChildrenCount--:t.switchTo("hand")})}}))})},o(e,null,[{key:"permission",get:function(){return r.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),e}(r.Controller),p="line",f=[],h=function(t){return f.forEach(function(e){t||-1==e.attrs.name.indexOf(p)?e.deactive():e.active()})},b=function(t){function e(n){u(this,e);var o=l(this,t.call(this,n));return f.length<4&&f.push(n),o}return s(e,t),e.prototype.switchStateHandler=function(t,e){var n=this.getPDFUI();p=e,n.getStateHandlerManager().then(function(n){n.switchTo(t),n.getCurrentStates().setPathType(e),h()})},e.prototype.postlink=function(){var t=this;this.addDestroyHook(this.getPDFUI().addViewerEventListener("switch-state-handler",function(e,n,o){e.getStateName()===t.constructor.getName()?h():n.getStateName()===t.constructor.getName()&&(f.forEach(function(t){return t.deactive()}),t.component.parent.element.classList.remove("selected"))}));var e=this.getPDFUI();e.getPDFViewer().then(function(n){t.addDestroyHook(n.getKeyboardEventBinder("create-annotation-keyboard-event-binder").on("cancel-creating-drawing-annot",function(n){if(t.component.isActive){var o=t.component.findClosestComponent(function(t){return"tab"===t.nodeName});o&&o.isActive&&e.getStateHandlerManager().then(function(t){var e=t.getCurrentStates();e.activedChildrenCount>0?e.activedChildrenCount--:t.switchTo("hand")})}}))})},e.prototype.handle=function(){this.component.parent.select(this.component),this.component.parent.element.classList.add("selected")},o(e,null,[{key:"permission",get:function(){return r.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),e}(r.Controller),g=function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.getName=function(){return"edit-pageobjects"},e.getLoader=function(){return a.default},e.prototype.init=function(){var t=r.modular.module("edit-pageobjects",[]);t.registerFragment("edit-all-objects-button",{template:'<xbutton name="edit-all-objects" icon-class="fv__icon-edit-edit-all" @tooltip>edit-pageobjects:buttons.edit-all-objects</xbutton>',config:[{target:"edit-all-objects",tooltip:{title:"edit-pageobjects:buttons.edit-all-objects"},callback:function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.getName=function(){return"edit-all"},e.prototype.handle=function(){this.switchStateHandler("edit-all")},e}(d)}]}),t.registerFragment("path-objects-dropdown",{template:(0,i.default)(),config:[{target:"create-shapeObject-dropdown",tooltip:{title:"edit-pageobjects:dropdown-tooltip"},callback:function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.prototype.postlink=function(){this.component.select(this.component.childAt(0))},o(e,null,[{key:"permission",get:function(){return r.PDFViewCtrl.Consts.PDFDocPermission.ModifyDocument}}]),e}(r.Controller)},{target:"add-pathObject-line",tooltip:{title:"toolbar.tooltip.line.title"},callback:function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.getName=function(){return"add-path-object"},e.prototype.handle=function(){t.prototype.handle.call(this),this.switchStateHandler("add-path-object","line")},e}(b)},{target:"add-pathObject-square",tooltip:{title:"toolbar.tooltip.square.title"},callback:function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.getName=function(){return"add-path-object"},e.prototype.handle=function(){t.prototype.handle.call(this),this.switchStateHandler("add-path-object","square")},e}(b)},{target:"add-pathObject-circle",tooltip:{title:"toolbar.tooltip.circle.title"},callback:function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.getName=function(){return"add-path-object"},e.prototype.handle=function(){t.prototype.handle.call(this),this.switchStateHandler("add-path-object","circle")},e}(b)},{target:"add-pathObject-roundRect",tooltip:{title:"toolbar.tooltip.roundRect.title"},callback:function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return s(e,t),e.getName=function(){return"add-path-object"},e.prototype.handle=function(){t.prototype.handle.call(this),this.switchStateHandler("add-path-object","roundRect")},e}(b)}]})},e.prototype.beforeMounted=function(t){var e=t.getComponentByName("edit-tab");e&&e.show()},e.prototype.fragments=function(){return[]},e}(r.UIXAddon);e.default=g},,,,,,,,,,,,,,,,function(t,e){}]).default});