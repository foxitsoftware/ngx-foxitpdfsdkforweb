!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],e):"object"==typeof exports?exports.PrintUIXAddon=e(require("UIExtension")):t.PrintUIXAddon=e(t.UIExtension)}(self,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(e,n){e.exports=t},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=n(9)},function(t,e,n){n(2);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<div class="fv__ui-print-process">\n    <div class="fv__ui-print-process-title"  data-i18n="print:dialog.printProcess"></div>\n    <div class="fv__ui-print-process-digital-progress"><span class="fv__ui-print-process-current">0</span>/<span class="fv__ui-print-process-total">0</span></div>\n    <div class="fv__ui-print-process-bar">\n        <div class="fv__ui-print-process-percent"></div>\n    </div>\n</div>'}},function(t,e,n){"use strict";function r(t,e){if(!function(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](t):t instanceof e}(t,e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=function(){function t(e,n){r(this,t),this.counter=0,this.modes={iframe:"iframe",popup:"popup"},this.standards={strict:"strict",loose:"loose",html5:"html5"};var i={mode:this.modes.iframe,standard:this.standards.html5,popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!0,extraCss:"",extraHead:"",retainAttr:["id","class","style"]};this.settings=Object.assign({},i,n),this.idPrefix="printArea_",this.ele=1===e.nodeType?e:document.querySelector(e)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"print",value:function(){var t=this;this.counter++;for(var e=document.querySelectorAll("[id^="+this.idPrefix+"]");e.length;)e[0].parentNode.removeChild(e[0]),e=document.querySelectorAll("[id^="+this.idPrefix+"]");this.settings.id=this.idPrefix+this.counter;var n=this.getPrintWindow();this.write(n.doc,this.ele),setTimeout(function(){t.windowPrint(n)},1e3)}},{key:"windowPrint",value:function(t){var e=t.win;e.focus(),e.print(),this.settings.mode===this.modes.popup&&this.settings.popClose&&setTimeout(function(){e.close()},1e3)}},{key:"write",value:function(t,e){t.open(),t.write(this.docType()+"<html>"+this.getHead()+this.getBody(e)+"</html>"),t.close()}},{key:"docType",value:function(){return this.settings.mode===this.modes.iframe?"":this.settings.standard===this.standards.html5?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+(this.settings.standard===this.standards.loose?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+(this.settings.standard===this.standards.loose?"loose":"strict")+'.dtd">'}},{key:"getHead",value:function(){var t="";this.settings.extraHead&&this.settings.extraHead.replace(/([^,]+)/g,function(e){t+=e});var e=document.querySelectorAll("link");return e=Array.from(e).filter(function(t){var e=t.getAttribute("rel");return e&&"stylesheet"===e.toLowerCase()}).filter(function(t){var e=t.getAttribute("media");return!e||"print"===e.toLowerCase()||"all"===e.toLowerCase()}).map(function(t){var e=t.getAttribute("href");return'<link type="text/css" rel="stylesheet" href="'.concat(e,'" >')}),this.settings.extraCss&&this.settings.extraCss.replace(/([^,\s]+)/g,function(e){t+='<link type="text/css" rel="stylesheet" href="'+e+'">'}),"<head><title>"+this.settings.popTitle+"</title>"+t+e.join()+"</head>"}},{key:"getBody",value:function(t){var e="",n=this.settings.retainAttr,r=this.getFormData(t),i="";return n.forEach(function(t){var e=r.getAttribute(t);e&&(i+=(i.length>0?" ":"")+t+"='"+e+"'")}),"<body>"+(e+="<div "+i+">"+r.innerHTML+"</div>")+"</body>"}},{key:"getFormData",value:function(t){var e=t.cloneNode(!0),n=e.querySelectorAll("input,select,textarea");return Array.from(t.querySelectorAll("input,select,textarea")).forEach(function(t,e){var r=t.getAttribute("type");if(!r){var i=t.nodeName;r="SELECT"===i?"select":"TEXTAREA"===i?"textarea":""}var o=n[e];if("radio"===r||"checkbox"===r)o.removeAttribute("checked"),t.checked&&o.setAttribute("checked",!0);else if("text"===r||""===r)o.setAttribute("value",t.textContent);else if("select"===r){var a=t.querySelectorAll("option"),s=o.querySelectorAll("option");Array.from(a).forEach(function(t,e){s[e].removeAttribute("selected"),t.selected&&s[e].setAttribute("selected",!0)})}else"textarea"===r&&(o.textContent=t.value)}),e}},{key:"getPrintWindow",value:function(){switch(this.settings.mode){case this.modes.iframe:var t=this.Iframe();return{win:t.contentWindow||t,doc:t.doc};case this.modes.popup:var e=this.Popup();return{win:e,doc:e.doc}}}},{key:"Iframe",value:function(){var t,e=this.settings.id;try{t=document.createElement("iframe"),document.body.appendChild(t),t.setAttribute("style","border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;"),t.setAttribute("id",e),t.setAttribute("src","#"+(new Date).getTime()),t.doc=null,t.doc=t.contentDocument?t.contentDocument:t.contentWindow?t.contentWindow.document:t.document}catch(t){throw t+". iframes may not be supported in this browser."}if(null==t.doc)throw"Cannot find document.";return t}},{key:"Popup",value:function(){var t="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no";t+=",width="+this.settings.popWd+",height="+this.settings.popHt,t+=",resizable=yes,screenX="+this.settings.popX+",screenY="+this.settings.popY+",personalbar=no,scrollbars=yes";var e=window.open("","_blank",t);return e.doc=e.document,e}}]),t}();e.default=o},function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),i=a(n(5)),o=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}n(15);var s=r.PDFViewCtrl.Deps.jQuery,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pdfUI=e,this.a4Width=794,this.a4Height=1123,this.printDom=s("<div id='print-dom'></div>"),this.total=0}return t.prototype.setTotal=function(t){this.total=t},t.prototype.getScale=function(t,e){return Math.min(this.a4Width/t,this.a4Height/e)},t.prototype.createPagePrintHtml=function(t){this.printDom.append("<div style='width: "+this.a4Width+"px;height:"+this.a4Height+"px;position: relative;' data-index="+t+"><img style='position: absolute;top: 0;bottom: 0;left: 0;right: 0;margin: auto;'></img></div>")},t.prototype.insertImageByIndex=function(t,e){this.printDom.find("[data-index="+t+"] img").prop({src:e})},t.prototype.print=function(){var t=new i.default(this.printDom[0]);t.getHead=function(){return"<style>*{margin: 0;padding: 0;}</style>"},t.print(),this.out()},t.prototype.out=function(){this.printDom.empty()},t.prototype.showProcess=function(){this.$process=s((0,o.default)()),this.$process.find(".fv__ui-print-process-total").html(this.total),this.pdfUI.localizer.localizeRecursive(this.$process.get(0)),s(document.body).append(this.$process)},t.prototype.updateProcess=function(t){this.$process.find(".fv__ui-print-process-current").html(t),this.$process.find(".fv__ui-print-process-percent").css({width:t/this.total*100+"%"})},t.prototype.hideProcess=function(){this.$process.remove()},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(6)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var s=o.PDFViewCtrl.Deps.jQuery,c=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},u=o.PDFViewCtrl.Events,l=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.startIndex=0,r.endIndex=0,r.pageCount=0,r.fromToArray=[],r}return a(e,t),e.prototype.postlink=function(){var t=this;this.printComponent=new i.default(this.getPDFUI()),this.addDestroyHook(this.getPDFUI().addViewerEventListener(u.openFileSuccess,function(e){t.pageCount=e.getPageCount()}))},e.prototype.mounted=function(){t.prototype.mounted.call(this),this.$closeIcon=s(this.component.getComponentByName("print-dialog-close-icon").element),this.$closeBtn=s(this.component.getComponentByName("print-dialog-close-btn").element),this.$okBtn=s(this.component.getComponentByName("print-dialog-ok-btn").element),this.$range=s(this.component.getComponentByName("range-item").element),this.$rangeFrom=s(this.component.getComponentByName("range-from").element),this.$rangeTo=s(this.component.getComponentByName("range-to").element),this.$rangeAssign=s(this.component.getComponentByName("range-assign").element),this.$printComments=s(this.component.getComponentByName("print-comments").element),this._bindEvent()},e.prototype._bindEvent=function(){var t=this,e=this,n=this.getPDFUI();function i(){e.$rangeFrom.prop({disabled:!0}),e.$rangeTo.prop({disabled:!0})}function o(){e.$rangeAssign.prop({disabled:!0})}this.$range.find("[value='current']").prop({checked:"checked"}),i(),o(),this.$closeIcon.on("click",function(){t.component.hide()}),this.$closeBtn.on("click",function(){t.component.hide()}),this.$range.find("[name='print-range']").on("change",function(e){switch(e.target.value){case"fromTo":t.$rangeFrom.prop({disabled:!1}),t.$rangeTo.prop({disabled:!1}),o();break;case"assign":t.$rangeAssign.prop({disabled:!1}),i();break;default:o(),i()}}),this.$rangeFrom.on("input",function(n){var r=n.target.value;r>e.pageCount?t.$rangeFrom.val(e.pageCount):r>e.$rangeTo.val()&&e.$rangeTo.val(r)}),this.$rangeTo.on("input",function(n){n.target.value>e.pageCount&&t.$rangeTo.val(e.pageCount)}),this.$okBtn.on("click",function(){n.getPDFDocRender().then(function(i){var o=t.$range.find("[name='print-range']:checked").val();switch(o){case"all":e.startIndex=0,e.endIndex=e.pageCount;break;case"current":e.startIndex=i.getCurrentPageIndex(),e.endIndex=e.startIndex+1;break;case"fromTo":e.startIndex=e.$rangeFrom.val()-1,e.endIndex=e.$rangeTo.val();break;default:e.$rangeAssign.val().split(",").map(function(t){if(t.indexOf("-")>-1){var n=t.split("-"),i=r(n,2),o=i[0],a=i[1],s=Math.max(Math.min(+o-1,+a),0),c=Math.min(Math.max(+o-1,+a),e.pageCount);e.fromToArray.push([s,c])}else e.fromToArray.push([t-1,+t])})}var a=t.$printComments.prop("checked")?["page","annot"]:["page"];n.getCurrentPDFDoc().then(function(n){t.component.hide();var r=[],i=0;if("assign"===o)for(var s=0;s<e.fromToArray.length;s++){i+=e.fromToArray[s][1]-e.fromToArray[s][0]}else i=e.endIndex-e.startIndex;e.printComponent.setTotal(i),e.printComponent.showProcess();var u=0;if("assign"===o)for(var l=0;l<e.fromToArray.length;l++)for(var p=function(t){var i=c();e.printComponent.createPagePrintHtml(t),n.getPageByIndex(t).then(function(n){var r=e.printComponent.getScale(n.getWidth(),n.getHeight());n.getPageBitmap(r,0,{x:0,y:0,width:n.getWidth()*r,height:n.getHeight()*r},a).then(function(n){var r=n.buffer,o=n.width,a=n.height,s=document.createElement("canvas");s.width=o,s.height=a;var c=s.getContext("2d"),l=c.createImageData(o,a);l.data.set(new(Uint8ClampedArray||Uint8Array)(r)),c.putImageData(l,0,0),s.toBlob(function(n){e.printComponent.insertImageByIndex(t,URL.createObjectURL(n)),++u,e.printComponent.updateProcess(u),i.resolve()},"image/png")})}),r.push(i.promise)},d=e.fromToArray[l][0];d<e.fromToArray[l][1];d++)p(d);else for(var f=function(t){var i=c();e.printComponent.createPagePrintHtml(t),n.getPageByIndex(t).then(function(n){var r=e.printComponent.getScale(n.getWidth(),n.getHeight());n.getPageBitmap(r,0,{x:0,y:0,width:n.getWidth()*r,height:n.getHeight()*r},a).then(function(n){var r=n.buffer,o=n.width,a=n.height,s=document.createElement("canvas");s.width=o,s.height=a;var c=s.getContext("2d"),l=c.createImageData(o,a);l.data.set(new(Uint8ClampedArray||Uint8Array)(r)),c.putImageData(l,0,0),s.toBlob(function(n){e.printComponent.insertImageByIndex(t,URL.createObjectURL(n)),++u,e.printComponent.updateProcess(u),i.resolve()},"image/png")})}),r.push(i.promise)},h=e.startIndex;h<e.endIndex;h++)f(h);Promise.all(r).then(function(){e.fromToArray=[],e.printComponent.hideProcess(),e.printComponent.print()})})})})},e}(o.Controller);e.default=l},function(t,e,n){(function(e){t.exports=!1;try{t.exports="[object process]"===Object.prototype.toString.call(e.process)}catch(t){}}).call(this,n(1))},function(t,e,n){"use strict";(function(e){
/*! art-template@runtime | https://github.com/aui/art-template */
var r=n(8),i=Object.create(r?e:window),o=/["&'<>]/;i.$escape=function(t){return function(t){var e=""+t,n=o.exec(e);if(!n)return t;var r="",i=void 0,a=void 0,s=void 0;for(i=n.index,a=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}a!==i&&(r+=e.substring(a,i)),a=i+1,r+=s}return a!==i?r+e.substring(a,i):r}(function t(e){"string"!=typeof e&&(e=void 0===e||null===e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},i.$each=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e(t[n],n);else for(var i in t)e(t[i],i)},t.exports=i}).call(this,n(1))},function(t,e,n){n(2);t.exports=function(t){"use strict";t=t||{};var e="";return e+='<layer name="print-dialog" class="fv__ui-print-layer center" append-to="body" @draggable>\n    <div class="fv__ui-print-dialog" @stop-drag>\n        <div class="fv__ui-print-dialog-header">\n            <div class="fv__ui-sign-dialog-title" data-i18n="print:dialog.printDialog.title"></div>\n            <i name="print-dialog-close-icon">Ã—</i>\n        </div>\n        <div class="fv__ui-print-dialog-body">\n            <div class="fv__ui-print-item" name="range-item">\n                <div class="fv__ui-print-item-title" data-i18n="print:dialog.printDialog.range"></div>\n                <div class="fv__ui-print-range">\n                    <label><input name="print-range" type="radio" value="all"/><span data-i18n="print:dialog.printDialog.all"></span></label>\n                </div>\n                <div class="fv__ui-print-range">\n                    <label><input name="print-range" type="radio" value="current"/><span data-i18n="print:dialog.printDialog.current"></span></label>\n                </div>\n                <div class="fv__ui-print-range">\n                    <label><input name="print-range" type="radio" value="fromTo"/><span data-i18n="print:dialog.printDialog.from"></span><input class="print-common-input" type="number" min="1" name="range-from"/><span data-i18n="print:dialog.printDialog.to"></span><input class="print-common-input" type="number" name="range-to"/></label>\n                </div>\n                <div class="fv__ui-print-range">\n                    <label><input name="print-range" type="radio" value="assign"/><span data-i18n="print:dialog.printDialog.assign"></span><input class="print-common-input" type="text" name="range-assign"/><span>1,2,5-8</span></label>\n                </div>\n            </div>\n            <div class="fv__ui-print-item">\n                <div class="fv__ui-print-item-title" data-i18n="print:dialog.printDialog.comments"></div>\n                <div class="fv__ui-print-comments">\n                    <label><input name="print-comments" type="checkbox" value=""/><span data-i18n="print:dialog.printDialog.printComments"></span></label>\n                </div>\n            </div>\n        </div>\n        <div class="fv__ui-print-dialog-footer">\n            <div class="fv__ui-print-dialog-btns">\n                <button class="fv__ui-print-btn fv__ui-print-dialog-cancel" data-i18n="print:dialog.cancel" name="print-dialog-close-btn"></button>\n                <button class="fv__ui-print-btn fv__ui-print-dialog-ok" data-i18n="print:dialog.ok" name="print-dialog-ok-btn"></button>\n            </div>\n        </div>\n    </div>\n</layer>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}n(20);var o=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return i(e,t),e.prototype.handle=function(t){var e=this.getComponentByName("print-dialog");e.update(),e.open(document.body)},e}(r.Controller);e.default=o},function(t,e){t.exports=null},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),i=c(n(12)),o=c(n(11)),a=c(n(10)),s=c(n(7));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}}(t,e))}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return u(e,t),e.getName=function(){return"print"},e.getLoader=function(){return i.default},e.prototype.init=function(){r.modular.module("print-module",[])},e.prototype.fragments=function(){return[{target:"home-tab-group-io",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:'<xbutton @tooltip name="print-button" icon-class="fv__icon-toolbar-print">print:button-tooltip.title</xbutton>',config:[{target:"print-button",tooltip:{title:"print:button-tooltip.title"},callback:o.default}]},{target:"template-container",action:r.UIConsts.FRAGMENT_ACTION.APPEND,template:(0,a.default)(),config:{target:"print-dialog",callback:s.default}}]},e}(r.UIXAddon);e.default=l},,function(t,e){},,,,,function(t,e){}]).default});