!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("UIExtension")):"function"==typeof define&&define.amd?define(["UIExtension"],t):"object"==typeof exports?exports.PasswordProtectAddon=t(require("UIExtension")):e.PasswordProtectAddon=t(e.UIExtension)}(self,function(e){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(t,r){t.exports=e},function(e,t,r){"use strict";e.exports=r(10)},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){r(1);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div name="password-protect">\n    <xbutton name="remove-protect-btn" icon-class="fv__icon-remove-protect" @tooltip></xbutton>\n</div>'}},function(e,t,r){r(1);e.exports=function(e){"use strict";e=e||{};var t="";return t+='<div name="password-protect">\n    <xbutton name="password-protect-btn" icon-class="fv__icon-password-protect" @tooltip></xbutton>\n    <password-protect:password-protect-popup name="password-protect-popup" append-to="body" class="center" modal backdrop>\n        <layer-header title="password-protect:buttons.title" @draggable="{type:\'parent\'}"></layer-header>\n        <layer-view>\n        </layer-view>\n    </password-protect:password-protect-popup>\n\n    <password-protect:owner-password-popup name="owner-password-popup" append-to="body" class="center" modal backdrop>\n        <layer-header title="password-protect:buttons.title" @draggable="{type:\'parent\'}"></layer-header>\n        <layer-view>\n            <div class="fv__input-owner-password" data-i18n="password-protect:buttons.inputOwnerPassword"></div>\n            <div class="fv__password-protect-error fv__hide"></div>\n            <input type="password" class="fv__owner-password-input"/>\n            <div class="fv__button-container">\n                <button type="button" class="fv__password-btn">Ok</button>\n                <button type="button" class="fv__password-cancel">Cancel</button>\n            </div>\n        </layer-view>\n    </password-protect:password-protect-popup>\n</div>'}},function(e,t){e.exports=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var s=o.PDFViewCtrl.Events,a=function(e){function t(r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r))}return n(t,e),t.prototype.handle=function(){var t=this;e.prototype.handle.call(this),this.active&&(this.needPassword?(this.ownerPasswordPopop.setSubmitCallback(function(e){t.currentDoc.checkPassword(e).then(function(e){3==e?(t.ownerPasswordPopop.hide(),t.needPassword=!1,t.currentDoc.setPasswordType(e),t.handle()):t.ownerPasswordPopop.showError("Owner password is nor correct")})}),this.ownerPasswordPopop.hideError(),this.ownerPasswordPopop.resetInput(),this.ownerPasswordPopop.show()):window.confirm("Are you sure you want to remove security from this document?")&&this.currentDoc.removeSecurity().then(function(e){e&&t.removeSecurityEvent()}).catch(function(e){console.log(e)}))},t.prototype.mounted=function(){var e=this,t=this.getPDFUI();this.ownerPasswordPopop=this.getComponentByName("owner-password-popup"),t.addViewerEventListener(s.openFileSuccess,function(t){e.currentDoc=t,t.getPasswordType().then(function(t){2==t?(e.activeBtn(),e.needPassword=!0):3==t?(e.activeBtn(),e.needPassword=!1):e.inActiveBtn()})})},t.prototype.activeBtn=function(){this.component.element.classList.remove("fv__password-disabled-cursor"),this.active=!0},t.prototype.inActiveBtn=function(){this.component.element.classList.add("fv__password-disabled-cursor"),this.active=!1},t.prototype.removeSecurityEvent=function(){this.inActiveBtn();var e=this.getComponentByName("password-protect-btn");e.controller.setDefaultData(),e.controller.needPassword=!1},t}(o.Controller);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var s=o.PDFViewCtrl.Events,a=function(e){function t(r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r))}return n(t,e),t.prototype.handle=function(){var e=this;this.isReady&&(this.needPassword?(this.ownerPasswordPopop.setSubmitCallback(function(t){e.currentDoc.checkPassword(t).then(function(r){3==r?(e.data.ownerPassword=t,e.needPassword=!1,e.ownerPasswordPopop.hide(),e.currentDoc.setPasswordType(r),e.handle()):e.ownerPasswordPopop.showError("Owner password is nor correct")})}),this.ownerPasswordPopop.hideError(),this.ownerPasswordPopop.resetInput(),this.ownerPasswordPopop.show()):(this.popop.updateData(this.data),this.popop.show()))},t.prototype.setDefaultData=function(){this.data={userPassword:"",ownerPassword:"",isEncryptMetadata:!0,cipherType:"aes256",print:2,accessibility:!0,copy:!0,change:4}},t.prototype.mounted=function(){var e=this;this.popop=this.getComponentByName("password-protect-popup"),this.ownerPasswordPopop=this.getComponentByName("owner-password-popup"),this.getPDFUI().addViewerEventListener(s.openFileSuccess,function(t){e.currentDoc=t,e.needPassword=!1,e.isReady=!1,e.setDefaultData(),e.popop.setSubmitCallback(function(r,o,n,s,a){t.setPasswordAndPermission(r,o,n,s,a).then(function(t){t?(-1!=r&&(e.data.userPassword=r),e.data.ownerPassword=o,e.data.cipherType=s,e.data.isEncryptMetadata=a,e.data.permission=n,e.data=e.convertPermission(e.data),e.getComponentByName("remove-protect-btn").controller.activeBtn(),e.currentDoc.setPasswordType(3),e.popop.hide()):e.popop.showError()}).catch(function(t){e.popop.showError(t)})}),t.getPasswordType().then(function(r){return 2==r&&(e.needPassword=!0),t.getStdCipherOptions()}).then(function(t){return void 0===t.permission?e.setDefaultData():(e.data=e.convertPermission(t),e.data.userPassword="",e.data.ownerPassword=""),e.currentDoc.password?e.currentDoc.checkPassword(e.currentDoc.password):(e.isReady=!0,!1)}).then(function(t){if(!1===t)return!1;e.isReady=!0,3===t?(e.data.ownerPassword=e.currentDoc.password,"aes256"!=e.data.cipherType&&e.currentDoc.getUserPassword(e.currentDoc.password).then(function(t){e.data.userPassword=t})):2===t&&(e.data.userPassword=e.currentDoc.password)})})},t.prototype.convertPermission=function(e){var t=e.permission;return e.print=2048&t?2:4&t?1:0,e.accessibility=!!(512&t),e.copy=!!(16&t),e.change=8&t&&32&t&&256&t?4:32&t&&256&t?3:256&t?2:1024&t?1:0,e},t}(o.Controller);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}r(21);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return n(t,e),t.getName=function(){return"owner-password-popup"},t.prototype.render=function(){e.prototype.render.call(this),this.destroyHooks=[],this.element.classList.add("fv__owner-password-popup"),this.localize()},t.prototype.bindEvent=function(e,t,r){var o=this.element.querySelector(e);o&&(o.addEventListener(t,r),this.destroyHooks.push(function(){o.removeEventListener(t,r)}))},t.prototype.mounted=function(){var t=this;e.prototype.mounted.call(this),this.bindEvent(".fv__password-cancel","click",function(e){t.hide()}),this.bindEvent(".fv__password-btn","click",function(e){t.submit()})},t.prototype.submit=function(){var e=this.element.querySelector(".fv__owner-password-input").value;e||this.showError("Admin password can't be blank."),this.submitCallback(e)},t.prototype.setSubmitCallback=function(e){this.submitCallback=e},t.prototype.showError=function(e){this.element.querySelector(".fv__password-protect-error").classList.remove("fv__hide"),this.element.querySelector(".fv__password-protect-error").innerHTML=e},t.prototype.hideError=function(){this.element.querySelector(".fv__password-protect-error").innerHTML="",this.element.querySelector(".fv__password-protect-error").classList.add("fv__hide")},t.prototype.resetInput=function(){this.element.querySelector(".fv__owner-password-input").value=""},t.prototype.destroy=function(){this.destroyHooks.forEach(function(e){return e()})},t}(o.widgets.LayerComponent);t.default=s},function(e,t,r){(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(e){}}).call(this,r(2))},function(e,t,r){"use strict";(function(t){
/*! art-template@runtime | https://github.com/aui/art-template */
var o=r(9),n=Object.create(o?t:window),s=/["&'<>]/;n.$escape=function(e){return function(e){var t=""+e,r=s.exec(t);if(!r)return e;var o="",n=void 0,a=void 0,i=void 0;for(n=r.index,a=0;n<t.length;n++){switch(t.charCodeAt(n)){case 34:i="&#34;";break;case 38:i="&#38;";break;case 39:i="&#39;";break;case 60:i="&#60;";break;case 62:i="&#62;";break;default:continue}a!==n&&(o+=t.substring(a,n)),a=n+1,o+=i}return a!==n?o+t.substring(a,n):o}(function e(t){"string"!=typeof t&&(t=void 0===t||null===t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},n.$each=function(e,t){if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)t(e[r],r);else for(var n in e)t(e[n],n)},e.exports=n}).call(this,r(2))},function(e,t,r){var o=r(1);e.exports=function(e){"use strict";e=e||{};var t="",r=o.$escape;return t+='<div class="fv__ui-password-protect-popup-body">\n    <div class="fv__password-protect-error fv__hide">\n        <div class="fv__password-protect-error-header"></div>\n        <div class="fv__password-protect-error-msg"></div>\n    </div>\n    <div class="fv__user-password-container fv__password-container">\n        <div class="fv__password-caption">Document Open Settings</div>\n        <label>\n            <input type="checkbox" class="fv__user-password-checkbox" ',e.userPassword&&(t+="checked"),t+=' />\n            Require a password to open the document\n        </label>\n        <div class="fv__user-password-input">\n            <div class="fv__password-input">\n                Password Input: <input type="password" class="fv__password fv__user-password1" value="',t+=r(e.userPassword),t+='" ',e.userPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-user1"></div>\n            </div>\n            <div class="fv__password-input">\n                Password Confirm: <input type="password" class="fv__password fv__user-password2" value="',t+=r(e.userPassword),t+='" ',e.userPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-user2"></div>\n            </div>\n            <div style="clear:both"></div>\n        </div>\n    </div>\n    <div class="fv__owner-password-container fv__password-container">\n        <div class="fv__password-caption">Document Restriction Settings</div>\n        <label>\n            <input type="checkbox" class="fv__owner-password-checkbox" ',e.ownerPassword&&(t+="checked"),t+=' />\n            Add Document Restriction\n        </label>\n        <div class="fv__owner-password-input">\n            <div class="fv__password-input">\n                Password Input: <input type="password" class="fv__password fv__owner-password1" value="',t+=r(e.ownerPassword),t+='" ',e.ownerPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-owner1"></div>\n            </div>\n            <div class="fv__password-input">\n                Password Confirm: <input type="password" class="fv__password fv__owner-password2" value="',t+=r(e.ownerPassword),t+='" ',e.ownerPassword||(t+="disabled"),t+=' onpaste="return false;" />\n                <div class="fv__show-password fv__show-password-owner2"></div>\n            </div>\n            <div style="clear:both"></div>\n        </div>\n        <div class="fv__password-caption">Permission Specification</div>\n        <div>\n            <div>\n                <span class="fv__permission-label">Printing: </span>\n                <select class="fv__permission-print" ',e.ownerPassword||(t+="disabled"),t+='>\n                    <option value="0" ',0==e.print&&(t+=" selected"),t+='>None</option>\n                    <option value="1" ',1==e.print&&(t+=" selected"),t+='>Low Resolution(150 dpi)</option>\n                    <option value="2" ',2==e.print&&(t+=" selected"),t+='>High Resolution</option>\n                </select>\n            </div>\n            <div>\n                <span class="fv__permission-label">Accessibility:</span>\n                <input type="checkbox" class="fv__permission-accessibility" ',e.ownerPassword||(t+="disabled"),t+=" ",e.accessibility&&(t+=" checked"),t+=' />\n            </div>\n            <div>\n                <span class="fv__permission-label">Copying:</span>\n                <input type="checkbox" class="fv__permission-copy" ',e.ownerPassword||(t+="disabled"),t+=" ",e.copy&&(t+=" checked"),t+=' />\n            </div>\n            <div>\n                <span class="fv__permission-label">Changes:</span>\n                <select class="fv__permission-change" ',e.ownerPassword||(t+="disabled"),t+='>\n                    <option value="0" ',0==e.change&&(t+=" selected"),t+='>None</option>\n                    <option value="1" ',1==e.change&&(t+=" selected"),t+='>Inserting, deleting and rotation pages</option>\n                    <option value="2" ',2==e.change&&(t+=" selected"),t+='>Filling in forms and signing existing signature fields</option>\n                    <option value="3" ',3==e.change&&(t+=" selected"),t+='>Commenting, filling form, signing existing signature fields</option>\n                    <option value="4" ',4==e.change&&(t+=" selected"),t+='>Any except extracting pages</option>\n                </select>\n            </div>\n        </div>\n    </div>\n    <div class="fv__encrypt-setting-container fv__password-container">\n        <div class="fv__password-caption">Encrypt Settings</div>\n        <div>\n            Encryption Algorithm:\n            <label><input name="algorithm" class="fv__algorithm-radio" type="radio" value="aes128" ',"aes128"==e.cipherType&&(t+="checked"),t+=' />128-bit AES</label>\n            <label><input name="algorithm" class="fv__algorithm-radio" type="radio" value="aes256" ',"aes256"==e.cipherType&&(t+="checked"),t+=' />256-bit AES</label>\n        </div>\n        <div>\n            <label><input type="checkbox" class="fv__encrypt-not-metadata" ',e.isEncryptMetadata||(t+="checked"),t+=' />Don\'t encrypt metadata</label>\n        </div>\n    </div>\n</div>\n<div class="fv__button-container">\n    <button type="button" class="fv__password-btn" ',e.ownerPassword||e.userPassword||(t+="disabled"),t+='>OK</button>\n    <button type="button" class="fv__password-cancel">Cancel</button>\n</div>'}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0));r(29);var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11));function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var a=function(e){function t(r,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,r,o,n));return s.userPasswordChanged=!1,s.destroyDataHooks=[],s}return s(t,e),t.getName=function(){return"password-protect-popup"},t.prototype.bindEvent=function(e,t,r){var o=this,n=this.element.querySelectorAll(e);0!=n.length&&n.forEach(function(e){e.addEventListener(t,r),o.destroyDataHooks.push(function(){e.removeEventListener(t,r)})})},t.prototype.render=function(){e.prototype.render.call(this),this.element.classList.add("fv__password-protect-popup")},t.prototype.setSubmitCallback=function(e){this.submitCallback=e},t.prototype.getFormDataAndCheckDataValid=function(){var e=void 0;document.querySelectorAll("input[name='algorithm']").forEach(function(t){t.checked&&(e=t.value)});var t=void 0;if(this.element.querySelector(".fv__user-password-checkbox").checked){t=this.element.querySelector(".fv__user-password1").value;var r=this.element.querySelector(".fv__user-password2").value;if(t!==r)return this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),""!==t&&""!==r&&this.showError("Document open password does not match!"),!1}else t=this.userPasswordChanged?"":"aes256"==e?-1:this.originData.userPassword;var o=void 0,n=void 0,s=void 0,a=void 0,i=void 0;if(this.element.querySelector(".fv__owner-password-checkbox").checked){o=this.element.querySelector(".fv__owner-password1").value;var c=this.element.querySelector(".fv__owner-password2").value;if(o!==c)return this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),""!==o&&""!==c&&this.showError("Document permission password does not match!"),!1;n=this.element.querySelector(".fv__permission-print").value,s=this.element.querySelector(".fv__permission-accessibility").checked,a=this.element.querySelector(".fv__permission-copy").checked,i=this.element.querySelector(".fv__permission-change").value}else o=this.originData.ownerPassword,n=this.originData.print,s=this.originData.accessibility,a=this.originData.copy,i=this.originData.change;if(!(t&&-1!=t||o))return this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),!1;if(t==o)return this.showError("The document open and owner passwords cannot be the same, please enter a different password in either the document open password field or the owner password field."),this.element.querySelector(".fv__password-btn").setAttribute("disabled",""),!1;var p=!this.element.querySelector(".fv__encrypt-not-metadata").checked,d=65532;return n<2&&(d^=2048,n<1&&(d^=4)),s||(d^=512),a||(d^=16),4===i?d^=1024:3==i?(d^=8,d^=1024):2==i?(d^=8,d^=32,d^=1024):1==i?(d^=8,d^=32,d^=256):0==i&&(d^=8,d^=32,d^=256,d^=1024),d+=4294901760,this.hideError(),this.element.querySelector(".fv__password-btn").removeAttribute("disabled"),[t,o,d,e,p]},t.prototype.updateData=function(e){var t=this;this.userPasswordChanged=!1,this.originData=e,this.destroyDataHooks.forEach(function(e){return e()}),this.element.querySelector(".fv__ui-layer-panel").innerHTML=(0,n.default)(e),this.localize(),this.bindEvent(".fv__show-password","click",function(e){var t=e.srcElement;t.classList.contains("fv__hide-password")?(t.classList.remove("fv__hide-password"),t.previousElementSibling.type="password"):(t.classList.add("fv__hide-password"),t.previousElementSibling.type="text")}),this.bindEvent(".fv__password","keyup",function(e){e.srcElement.value=e.srcElement.value.replace(/[^\x00-\x80]/g,""),t.getFormDataAndCheckDataValid()}),this.bindEvent(".fv__password-btn","click",function(e){t.submit()}),this.bindEvent(".fv__password-cancel","click",function(e){t.hide()}),this.bindEvent(".fv__user-password-checkbox","change",function(e){t.element.querySelectorAll(".fv__user-password-container input").forEach(function(r){r!=e.target&&(r.disabled=!e.target.checked,t.userPasswordChanged=!0)}),t.getFormDataAndCheckDataValid()}),this.bindEvent(".fv__owner-password-checkbox","change",function(e){t.element.querySelectorAll(".fv__owner-password-container input,.fv__owner-password-container select").forEach(function(t){t!=e.target&&(t.disabled=!e.target.checked)}),t.getFormDataAndCheckDataValid()});var r=!0;this.bindEvent(".fv__algorithm-radio","change",function(e){if(r&&e.target.checked&&"aes128"==e.target.value&&""==t.originData.userPassword&&""!=t.originData.ownerPassword&&"aes256"==t.originData.cipherType){var o=t.element.querySelector(".fv__user-password1").value,n=t.element.querySelector(".fv__user-password2").value;""==o&&""==n&&(t.element.querySelector(".fv__user-password-checkbox").checked=!0,t.element.querySelector(".fv__user-password1").removeAttribute("disabled"),t.element.querySelector(".fv__user-password2").removeAttribute("disabled"),t.showError("For security, you need to reset the open password.",!0),r=!1)}})},t.prototype.submit=function(){var e=this.getFormDataAndCheckDataValid();return this.submitCallback.apply(this,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))},t.prototype.showError=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(this.element.querySelector(".fv__password-protect-error .fv__password-protect-error-header").innerHTML="Warn:",this.element.querySelector(".fv__password-protect-error").classList.add("fv__warn")):(this.element.querySelector(".fv__password-protect-error .fv__password-protect-error-header").innerHTML="Error:",this.element.querySelector(".fv__password-protect-error").classList.remove("fv__warn")),this.element.querySelector(".fv__password-protect-error").classList.remove("fv__hide"),this.element.querySelector(".fv__password-protect-error .fv__password-protect-error-msg").innerHTML=e},t.prototype.hideError=function(){this.element.querySelector(".fv__password-protect-error").classList.add("fv__hide")},t.prototype.destroy=function(){this.destroyHooks.forEach(function(e){return e()}),this.destroyDataHooks.forEach(function(e){return e()})},t}(o.widgets.LayerComponent);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0)),n=u(r(12)),s=u(r(8));r(19);var a=u(r(7)),i=u(r(6)),c=u(r(5)),p=u(r(4)),d=u(r(3));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var n=r[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.configurable&&void 0===e[n]&&Object.defineProperty(e,n,s)}}(e,t))}var f=(0,p.default)(),v=(0,d.default)(),w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return l(t,e),t.getName=function(){return"password-protect"},t.getLoader=function(){return c.default},t.prototype.init=function(){var e=o.modular.module("password-protect",[]),t=e.getRegistry();this.module=e,t.registerComponent(n.default),t.registerComponent(s.default),e.registerFragment("password-protect-button",{template:f,config:[{target:"password-protect-btn",tooltip:{title:"password-protect:buttons.title"},callback:a.default}]}),e.registerFragment("remove-protect-button",{template:v,config:[{target:"remove-protect-btn",tooltip:{title:"password-protect:buttons.removeTitle"},callback:i.default}]})},t.prototype.fragments=function(){return[]},t}(o.UIXAddon);t.default=w},,,,,,function(e,t){},,function(e,t){},,,,,,,,function(e,t){}]).default});